const s=document.querySelector("#resident_search");if(s){let o=function(l){if(l!="")fetch(BASE_PATH+`/api/residents/?search=${l}`).then(t=>t.json()).then(t=>{if(t.residents.length>0)n.innerText="",t.residents.forEach(a=>{const e=Object.assign(document.createElement("div"),{className:"flex flex-col w-full cursor-pointer hover:bg-table-even transition-all duration-300 ease-in-out rounded-md py-1 px-2",onmousedown:i=>{d(a.resident_id,a)}}),m=Object.assign(document.createElement("p"),{textContent:`${a.first_name} ${a.middle_name??""} ${a.last_name}`}),c=Object.assign(document.createElement("p"),{textContent:`${a.house_number} ${a.others}`,className:"italic text-xs text-project-blue/40"});e.append(m),e.append(c),n.append(e)});else{n.innerText="";const a=Object.assign(document.createElement("p"),{className:"flex w-full",textContent:"No results found."});n.append(a)}});else{n.innerText="";const t=Object.assign(document.createElement("p"),{className:"flex w-full",textContent:"Search for resident."});n.append(t)}},d=function(l,t){const a=document.querySelector("#resident_id");if(a)a.value=l;else{const e=Object.assign(document.createElement("input"),{type:"hidden",id:"resident_id",name:"resident_id",value:l});document.querySelector("form").append(e)}document.querySelector("#contact")&&(document.querySelector("#contact").value=t.phone_number),document.querySelectorAll(".form-input").forEach(e=>{e.name in t&&(e.value=t[e.name],e.name=="sex"&&document.querySelector("#sex").querySelectorAll("option").forEach(c=>{c.value==t[e.name]&&(c.selected=!0)}),e.name=="religion_id"&&document.querySelector("#religion_id").querySelectorAll("option").forEach(c=>{c.value==t[e.name]&&(c.selected=!0)}),e.name=="voter_status"&&document.querySelector("#voter_status").querySelectorAll("option").forEach(c=>{c.value==t[e.name]&&(console.log(c.value,t[e.name]),c.selected=!0)}),e.name=="age"&&(e.value=t[e.name]=u(t.birth_date)),e.name=="disabled"&&(e.value=t[e.name]==1?"Disabled":"Abled"))})};var fetchResident=o,selectResident=d;const n=document.querySelector("#search_names_container");let r;s.addEventListener("input",l=>{n.innerText="";const t=Object.assign(document.createElement("p"),{class:"flex w-full",textContent:"Searching..."});n.append(t),clearTimeout(r),r=setTimeout(()=>{o(l.target.value)},500)}),s.addEventListener("focus",()=>{n.innerText="";const l=Object.assign(document.createElement("p"),{className:"flex w-full",textContent:"Search for resident."});n.append(l),n.classList.remove("hidden"),s.value.length>0&&o(s.value)}),s.addEventListener("blur",l=>{n.classList.add("hidden")})}const u=n=>{const r=Date.now()-new Date(n).getTime(),o=new Date(r);return o.getUTCFullYear()-1970<0?0:Math.abs(o.getUTCFullYear()-1970)};
