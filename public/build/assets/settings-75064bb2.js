const L=document.querySelectorAll(".view_btn");document.querySelectorAll(".delete_btn");const c=document.querySelector("#add_position"),s=document.querySelector("#add_civil_status"),r=document.querySelector("#add_occupation"),l=document.querySelector("#add_religion"),u=document.querySelector("#add_security_question"),m=document.querySelector("#add_sex"),y=document.querySelector("#add_archive_reasons"),S=document.querySelector("#add_street"),t=document.querySelector("#add_modal"),e=document.querySelector("#submit_settings"),g=document.querySelector("#close_modal"),n=document.querySelector("#modal_title");let T="";g.addEventListener("click",()=>{document.querySelector("#name").value="",document.querySelector("#error_name").innerText="",t.classList.add("hidden")});L.forEach(d=>{d.addEventListener("click",async()=>{const i=await fetch(BASE_PATH+`/api/${d.dataset.route}/${d.dataset.id}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},credentials:"same-origin"});if(i.status==422){const{message:o}=await i.json();console.log(o)}const a=await i.json();document.querySelector("#name").value=a.data.name,T=a.data.id,e.dataset.type="update",e.innerText="Update Data",n.innerHTML="Edit Data",t.classList.toggle("hidden")})});e.addEventListener("click",async()=>{const d=e.dataset.type=="update"?"PATCH":"PUT",i=d=="PATCH"?`/api/${e.dataset.group}/${T}`:`/api/${e.dataset.group}`,a=await fetch(BASE_PATH+i,{method:d,headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({name:document.querySelector("#name").value}),credentials:"same-origin"});if(a.status==422){const{name:o}=await a.json();document.querySelector("#error_name").innerText=o??""}a.status==200&&(g.click(),location.reload())});c&&c.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Position",n.innerHTML="Add New Position",t.classList.toggle("hidden")});s&&s.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Civil Status",n.innerHTML="Add New Civil Status",t.classList.toggle("hidden")});r&&r.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Occupation",n.innerHTML="Add New Occupation",t.classList.toggle("hidden")});l&&l.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Religion",n.innerHTML="Add New Religion",t.classList.toggle("hidden")});u&&u.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Security Question",n.innerHTML="Add New Security Question",t.classList.toggle("hidden")});m&&m.addEventListener("click",()=>{console.log(e),e.dataset.type="create",e.innerText="Add Sex",n.innerHTML="Add Sex",t.classList.toggle("hidden")});y&&y.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Reason",n.innerHTML="Add Reason",t.classList.toggle("hidden")});S&&S.addEventListener("click",()=>{e.dataset.type="create",e.innerText="Add Street",n.innerHTML="Add Street",t.classList.toggle("hidden")});
