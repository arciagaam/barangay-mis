document.querySelectorAll("popup_trigger");const t=document.querySelector("#warning_modal");let n="",c="",o=null;document.addEventListener("click",a=>{const e=a.target;if(e.classList.contains("popup_trigger")||e.closest(".popup_trigger")){const r=e.classList.contains(".popup_trigger")?e:e.closest(".popup_trigger"),{url:i,type:l,group:s,fallback:d}=r.dataset;c=l,n=i,o=d,u({url:i,type:l,group:s})}a.stopPropagation()});function u({url:a,type:e,group:r}){e=="archive"?t.querySelector("#archive_input").classList.toggle("hidden"):t.querySelector("#confirm_text").innerText=`Are you sure you want to ${e} this ${r}`,t.classList.toggle("hidden")}t.querySelector("#submit").addEventListener("click",async()=>{if(c=="archive")await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},credentials:"same-origin",body:JSON.stringify({reason:t.querySelector("#reason").value})}),o?location.href=o:location.reload();else{if(c=="delete")return await fetch(n,{headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},credentials:"same-origin"}),o?location.href=o:location.reload(),!1;await fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},credentials:"same-origin"}),location.reload()}t.classList.toggle("hidden")});t.querySelector("#cancel").addEventListener("click",()=>{t.classList.toggle("hidden")});
