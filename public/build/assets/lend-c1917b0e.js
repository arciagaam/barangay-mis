const t=document.querySelector("#return_btn"),n=document.querySelector("#return_modal"),o=document.querySelector("#close_modal"),r=document.querySelector("#submit_return");o.addEventListener("click",()=>{n.classList.add("hidden"),document.querySelector("#error_returned_quantity").innerText="",document.querySelector("#error_return_remarks").innerText="",document.querySelector("#return_remarks").value="",document.querySelector("#returned_quantity").value=""});t&&t.addEventListener("click",()=>{n.classList.toggle("hidden")});r.addEventListener("click",async()=>{const e=await fetch(BASE_PATH+`/lend/${r.dataset.id}/return`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content},credentials:"same-origin",body:JSON.stringify({returned_quantity:document.querySelector("#returned_quantity").value,remarks:document.querySelector("#return_remarks").value})});if(e.status==422){const{returned_quantity:u,remarks:c}=await e.json();document.querySelector("#error_returned_quantity").innerText=u??"",document.querySelector("#error_return_remarks").innerText=c??""}else o.click(),location.reload()});
